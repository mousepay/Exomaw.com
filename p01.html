<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pista + Reloj + Libreta (B/N)</title>

<style>
  :root{
    /* ===== AJUSTA SOLO ESTA RUTA ===== */
    --bg-image: url("TU-RUTA/tu-reloj.jpg"); /* ← PON AQUÍ TU IMAGEN */

    /* Posición/tamaño del reloj SVG (agujas) */
    --clock-size: 420px;
    --clock-top: 26vh;
    --clock-left: 52%;

    /* Encendido de efectos extra: smoke / drop */
    --smoke: 1; /* 1 = activo, 0 = apagado */
    --drop: 1;  /* 1 = activo, 0 = apagado */
  }

  /* Reset suave */
  *,*::before,*::after{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:#111;color:#eaeaea;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.6}

  /* ================= HERO con imagen ================= */
  .exfx-hero{position:relative;min-height:72vh;overflow:hidden;background:#000}
  .exfx-hero::before{content:"";position:absolute;inset:0;background:var(--bg-image) center/cover no-repeat;filter:grayscale(100%) contrast(110%) brightness(.85)}
  .exfx-hero::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.6))}

  /* Texto sobre la imagen (ultra legible) */
  .exfx-center{position:absolute;inset:0;display:grid;place-items:center;padding:22px}
  .exfx-quote-wrap{
    width:min(1200px,92vw);
    background:rgba(0,0,0,.55);
    -webkit-backdrop-filter:blur(4px); backdrop-filter:blur(4px);
    border:1px solid rgba(255,255,255,.2);
    border-radius:16px; padding: clamp(16px,2.8vw,32px);
    box-shadow:0 24px 60px rgba(0,0,0,.55);
    text-align:center
  }
  .exfx-quote{margin:0 0 12px;color:#fff;font-weight:900;letter-spacing:.2px;font-size:clamp(1.2rem,1rem + 2.4vw,3.2rem);text-shadow:0 2px 10px rgba(0,0,0,.85)}
  .exfx-meta{margin:0 0 18px;color:#ddd;font-style:italic;font-size:clamp(.95rem,.9rem + .5vw,1.15rem);text-shadow:0 1px 6px rgba(0,0,0,.75)}

  .exfx-actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
  .exfx-open{background:#fff;color:#000;border:1px solid #fff;border-radius:12px;padding:10px 16px;font-weight:800;cursor:pointer;box-shadow:0 8px 26px rgba(0,0,0,.55);transition:transform .08s}
  .exfx-open:active{transform:translateY(1px) scale(.99)}

  /* HUECO opcional para tu botón Volver (si lo quieres junto) */
  .exfx-slot-volver{display:inline-block}

  /* ============ Reloj SVG (agujas) ============ */
  .exfx-clock{
    position:absolute;width:var(--clock-size);height:var(--clock-size);
    left:calc(var(--clock-left) - var(--clock-size)/2); top:var(--clock-top);
    pointer-events:none;opacity:.9;z-index:1
  }
  .exfx-clock .face{fill:none;stroke:#fff;stroke-width:2;opacity:.15}
  .exfx-clock .hand{stroke:#fff;stroke-linecap:round;transform-origin:210px 210px}
  .exfx-clock .hour{stroke-width:6}
  .exfx-clock .min{stroke-width:4}
  .exfx-clock .sec{stroke:#ddd;stroke-width:2;opacity:.95}
  .exfx-clock .center{fill:#fff}

  /* ======== EFECTO HUMO (sutil, B/N) ======== */
  .exfx-smoke{
    position:absolute;inset:0;pointer-events:none;opacity:calc(var(--smoke));
    background:
      radial-gradient(1200px 400px at 20% 100%, rgba(255,255,255,.06), transparent 60%),
      radial-gradient(1000px 360px at 80% 100%, rgba(255,255,255,.04), transparent 60%);
    animation: exfx-haze 10s ease-in-out infinite alternate
  }
  @keyframes exfx-haze{
    0%{filter:blur(40px) opacity(.9)} 100%{filter:blur(60px) opacity(.7)}
  }

  /* ======== “Sangre” sutil en gris (lateral) ======== */
  .exfx-drop{
    position:absolute;right:0;top:0;width:120px;height:100%;opacity:calc(var(--drop)*.5);pointer-events:none;z-index:1
  }
  .exfx-drop::before{
    content:"";position:absolute;right:0;top:-20%;width:100%;height:140%;
    background:
      radial-gradient(70px 120px at 60% 0%, rgba(0,0,0,.55), transparent 70%),
      linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.8) 40%, rgba(0,0,0,0) 80%);
    filter:blur(1px);
    animation: exfx-drip 9s linear infinite
  }
  @keyframes exfx-drip{ 0%{transform:translateY(-10%)} 100%{transform:translateY(10%)} }

  /* ================= MODAL LIBRETA ================= */
  .exfx-modal[aria-hidden="true"]{display:none}
  .exfx-modal[aria-hidden="false"]{display:block}
  .exfx-backdrop{position:fixed;inset:0;background:rgba(0,0,0,.7);backdrop-filter:blur(2px)}
  .exfx-book-wrap{position:fixed;inset:0;display:grid;place-items:center;pointer-events:none;padding:16px}
  .exfx-cover,.exfx-pages{pointer-events:auto;height:min(76vh,760px)}
  .exfx-cover{
    width:min(44vw,520px);
    background:repeating-linear-gradient(135deg,#222,#222 14px,#111 14px,#111 28px);
    border-radius:18px 0 0 18px;box-shadow:0 18px 60px rgba(0,0,0,.65);
    transform-origin:left center;animation:exfx-open 900ms cubic-bezier(.2,.8,.2,1) forwards
  }
  .exfx-pages{
    --page-bg:#fff;--page-ink:#111;--page-line:#000;
    width:min(52vw,720px);background:var(--page-bg);color:var(--page-ink);
    border:2px solid #000;border-left:0;border-radius:0 18px 18px 0;
    box-shadow:0 18px 60px rgba(0,0,0,.75);padding:14px 16px 16px;position:relative;overflow:hidden
  }
  .exfx-pages.is-dark{--page-bg:#111;--page-ink:#f2f2f2;--page-line:#fff}
  .exfx-pages::before{content:"";position:absolute;inset:0;background:repeating-linear-gradient(var(--page-bg),var(--page-bg) 26px,rgba(0,0,0,.08) 27px);opacity:.35;pointer-events:none}

  .exfx-head{position:relative;display:flex;justify-content:space-between;align-items:center;z-index:2}
  .exfx-title{margin:0;font-size:1.05rem}
  .exfx-close{background:transparent;border:0;color:var(--page-ink);font-size:1.8rem;line-height:1;cursor:pointer;padding:0 6px}
  .exfx-tools{display:flex;justify-content:space-between;align-items:center;gap:.75rem;z-index:2;position:relative;margin-top:8px}
  .exfx-left{display:flex;align-items:center;gap:.5rem}
  .exfx-toggle{background:transparent;color:var(--page-ink);border:1px solid var(--page-ink);padding:6px 10px;border-radius:8px;font-weight:800;cursor:pointer}

  /* Lápiz y goma */
  .exfx-tool{background:#000;color:#fff;border:1px solid #000;border-radius:10px;padding:8px 12px;font-weight:800;cursor:pointer}
  .exfx-pages.is-dark .exfx-tool{background:#fff;color:#000;border-color:#fff}

  .exfx-pencil{position:relative;width:150px;height:24px;display:grid;grid-template-columns:1fr auto auto;align-items:center;
    transform:translateX(0);animation:exfx-pencil-enter .8s ease .3s both,exfx-pencil-bob 2.4s ease-in-out 1.2s infinite}
  .exfx-pencil .body{height:10px;border-radius:6px;background:linear-gradient(90deg,#666,#999 70%,#666)}
  .exfx-pencil .tip{width:0;height:0;border-left:12px solid #666;border-top:6px solid transparent;border-bottom:6px solid transparent}
  .exfx-pencil .eraser{width:18px;height:14px;border-radius:4px;background:#ddd;border:2px solid #aaa}

  .exfx-label{display:block;margin:10px 0 6px;color:var(--page-ink);z-index:2;position:relative}
  .exfx-text{width:100%;min-height:220px;resize:vertical;padding:12px 12px 12px 16px;border-radius:12px;border:1px dashed var(--page-line);
    background:color-mix(in srgb,var(--page-bg) 92%,white 8%);color:var(--page-ink);box-shadow:inset 0 2px 8px rgba(0,0,0,.08);outline:none;z-index:2;position:relative}

  .exfx-board{width:100%;height:260px;background:var(--page-bg);border:1px solid var(--page-line);border-radius:12px;display:block;
    box-shadow:inset 0 2px 8px rgba(0,0,0,.08);cursor:crosshair}

  .exfx-footer{margin-top:8px;color:var(--page-ink);z-index:2;position:relative}

  @keyframes exfx-open{0%{transform:perspective(1200px) rotateY(0)}60%{transform:perspective(1200px) rotateY(-115deg)}100%{transform:perspective(1200px) rotateY(-180deg)}}
  @keyframes exfx-pencil-enter{from{opacity:0;transform:translateX(-16px)}to{opacity:1;transform:translateX(0)}}
  @keyframes exfx-pencil-bob{0%,100%{transform:translateX(0) translateY(0)}50%{transform:translateX(0) translateY(-2px)}}
  .exfx-writing .exfx-pencil{animation:exfx-write .8s ease-in-out infinite}
  @keyframes exfx-write{0%,100%{transform:translateX(0)}50%{transform:translateX(6px)}}

  @media (max-width: 960px){
    :root{--clock-size:300px;--clock-top:30vh}
    .exfx-cover{display:none}
    .exfx-pages{width:min(94vw,720px);border-radius:14px;border-left:2px solid #000}
    .exfx-pages.is-dark{border-left-color:#fff}
  }
</style>
</head>
<body>

  <!-- ========= HERO: imagen + reloj + efectos + frase ========= -->
  <section class="exfx-hero" aria-label="Reloj">

    <!-- Agujas animadas -->
    <svg class="exfx-clock" viewBox="0 0 420 420" aria-hidden="true">
      <circle class="face" cx="210" cy="210" r="204"></circle>
      <line id="exfx-hour" class="hand hour" x1="210" y1="210" x2="210" y2="120"/>
      <line id="exfx-min"  class="hand min"  x1="210" y1="210" x2="210" y2="86"/>
      <line id="exfx-sec"  class="hand sec"  x1="210" y1="216" x2="210" y2="70"/>
      <circle class="center" cx="210" cy="210" r="6"/>
    </svg>

    <!-- Efectos alternativos: humo + “goteo” en gris -->
    <div class="exfx-smoke" aria-hidden="true"></div>
    <div class="exfx-drop"  aria-hidden="true"></div>

    <div class="exfx-center">
      <div class="exfx-quote-wrap">
        <!-- Pega aquí tu frase EXACTA -->
        <p class="exfx-quote">“Cada mañana a las 8:30, el reloj marcaba lo mismo. Las agujas brillaban, como si guardaran el secreto de quien las tocaba.”</p>
        <p class="exfx-meta">Archivo #P-01 — Bitácora de estación. Frecuencia: 8:30 h.</p>

        <div class="exfx-actions">
          <!-- Botón blanco para abrir la libreta -->
          <button class="exfx-open" type="button" aria-haspopup="dialog" aria-controls="exfx-modal">Abrir libreta</button>

          <!-- (Opcional) coloca aquí tu botón Volver si quieres que se vea junto -->
          <span class="exfx-slot-volver">
            <!-- EJEMPLO: <a href="index.html" class="tu-boton-volver">Volver</a> -->
          </span>
        </div>
      </div>
    </div>
  </section>

  <!-- ========= MODAL: Libreta en B/N con lápiz/goma ========= -->
  <section class="exfx-notes" data-note-key="pista_reloj_bn">
    <div class="exfx-modal" id="exfx-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="exfx-title">
      <div class="exfx-backdrop" data-exfx-close></div>

      <div class="exfx-book-wrap">
        <div class="exfx-cover" aria-hidden="true"></div>

        <div class="exfx-pages" id="exfx-pages">
          <header class="exfx-head">
            <h3 class="exfx-title" id="exfx-title">Mi libreta</h3>
            <button class="exfx-close" type="button" aria-label="Cerrar" data-exfx-close>&times;</button>
          </header>

          <div class="exfx-tools">
            <div class="exfx-left">
              <div class="exfx-pencil" aria-hidden="true">
                <div class="body"></div><div class="tip"></div><div class="eraser"></div>
              </div>
              <button class="exfx-toggle" id="exfx-theme">Tema: Blanco</button>
              <button class="exfx-toggle" id="exfx-pencil">Lápiz</button>
              <button class="exfx-toggle" id="exfx-eraser">Goma</button>
            </div>

            <div class="exfx-right">
              <button class="exfx-tool" id="exfx-save"  type="button">Guardar</button>
              <button class="exfx-tool" id="exfx-clear" type="button">Borrar</button>
            </div>
          </div>

          <label class="exfx-label" for="exfx-text">Escribe tu nota (teclado):</label>
          <textarea id="exfx-text" class="exfx-text" placeholder="Escribe aquí..."></textarea>

          <label class="exfx-label" for="exfx-board">O dibuja tu nota (lápiz / goma):</label>
          <canvas id="exfx-board" class="exfx-board"></canvas>

          <footer class="exfx-footer"><small>Se guarda en este navegador (texto + dibujo). Blanco y negro.</small></footer>
        </div>
      </div>
    </div>
  </section>

<script>
/* ===== Agujas del reloj (si tu foto no encaja, ajusta las variables CSS) ===== */
(function(){
  const H=document.getElementById('exfx-hour');
  const M=document.getElementById('exfx-min');
  const S=document.getElementById('exfx-sec');
  function tick(){
    const d=new Date();
    const s=d.getSeconds();
    const m=d.getMinutes()+s/60;
    const h=(d.getHours()%12)+m/60;
    H.style.transform=`rotate(${(h/12)*360}deg)`;
    M.style.transform=`rotate(${(m/60)*360}deg)`;
    S.style.transform=`rotate(${(s/60)*360}deg)`;
  }
  tick(); setInterval(tick,1000);
})();

/* ===== Libreta: tema, lápiz, goma, guardar/borrar, texto + canvas ===== */
(function(){
  const wrap=document.querySelector('.exfx-notes');
  const key='exfx_note_'+(wrap?.dataset?.noteKey||'nota');

  const modal=document.getElementById('exfx-modal');
  const pages=document.getElementById('exfx-pages');
  const openBtn=document.querySelector('.exfx-open');
  const backdrop=modal.querySelector('[data-exfx-close]');
  const closeBtn=modal.querySelector('.exfx-close');

  const themeBtn=document.getElementById('exfx-theme');
  const pencilBtn=document.getElementById('exfx-pencil');
  const eraserBtn=document.getElementById('exfx-eraser');

  const saveBtn=document.getElementById('exfx-save');
  const clearBtn=document.getElementById('exfx-clear');

  const text=document.getElementById('exfx-text');
  const board=document.getElementById('exfx-board');
  const ctx=board.getContext('2d');

  let tool='pencil'; // 'pencil' | 'eraser'

  function open(){
    modal.setAttribute('aria-hidden','false');
    // cargar guardado
    try{
      const data=JSON.parse(localStorage.getItem(key)||'{}');
      if(data.text) text.value=data.text;
      if(data.img){
        const img=new Image();
        img.onload=()=>{ resize(); ctx.clearRect(0,0,board.width,board.height); ctx.drawImage(img,0,0,board.width,board.height); };
        img.src=data.img;
      }else{ resize(); }
      if(data.theme==='dark'){ pages.classList.add('is-dark'); themeBtn.textContent='Tema: Negro'; }
    }catch(e){ resize(); }
    setTimeout(()=>text.focus(),50);
    document.addEventListener('keydown', esc);
  }
  function close(){ modal.setAttribute('aria-hidden','true'); document.removeEventListener('keydown', esc); }
  function esc(e){ if(e.key==='Escape') close(); }

  openBtn.addEventListener('click', open);
  [backdrop,closeBtn].forEach(el=>el.addEventListener('click', close));

  /* Tema */
  themeBtn.addEventListener('click', ()=>{
    pages.classList.toggle('is-dark');
    themeBtn.textContent = pages.classList.contains('is-dark') ? 'Tema: Negro' : 'Tema: Blanco';
    resize();
  });

  /* Herramientas */
  pencilBtn.addEventListener('click', ()=> tool='pencil');
  eraserBtn.addEventListener('click', ()=> tool='eraser');

  /* Canvas responsivo */
  function resize(){
    const r=board.getBoundingClientRect();
    const tmp=document.createElement('canvas');
    tmp.width=r.width; tmp.height=r.height;
    tmp.getContext('2d').drawImage(board,0,0,r.width,r.height);
    board.width=r.width; board.height=r.height;
    ctx.drawImage(tmp,0,0);
    ctx.lineCap='round'; ctx.lineJoin='round';
    ctx.lineWidth=2.2;
  }
  new ResizeObserver(resize).observe(board);

  /* Dibujo */
  let drawing=false, lastX=0,lastY=0;
  function start(x,y){ drawing=true; [lastX,lastY]=[x,y]; pages.classList.add('exfx-writing'); }
  function move(x,y){
    if(!drawing) return;
    if(tool==='pencil'){
      ctx.globalCompositeOperation='source-over';
      ctx.strokeStyle= pages.classList.contains('is-dark') ? '#fff' : '#000';
    }else{
      ctx.globalCompositeOperation='destination-out';
      ctx.strokeStyle='rgba(0,0,0,1)';
    }
    ctx.beginPath(); ctx.moveTo(lastX,lastY); ctx.lineTo(x,y); ctx.stroke();
    [lastX,lastY]=[x,y];
  }
  function end(){ drawing=false; setTimeout(()=>pages.classList.remove('exfx-writing'),400); }

  function pos(ev){
    const r=board.getBoundingClientRect();
    if(ev.touches && ev.touches[0]) return {x:ev.touches[0].clientX-r.left, y:ev.touches[0].clientY-r.top};
    return {x:ev.clientX-r.left, y:ev.clientY-r.top};
  }

  board.addEventListener('mousedown', e=>{const p=pos(e); start(p.x,p.y);});
  board.addEventListener('mousemove', e=>{const p=pos(e); move(p.x,p.y);});
  window.addEventListener('mouseup', end);

  board.addEventListener('touchstart', e=>{const p=pos(e); start(p.x,p.y); e.preventDefault();},{passive:false});
  board.addEventListener('touchmove',  e=>{const p=pos(e); move(p.x,p.y);  e.preventDefault();},{passive:false});
  window.addEventListener('touchend', end, {passive:true});

  /* Guardar / Borrar */
  function save(){
    const data={ text: text.value||'', img: board.toDataURL('image/png'), theme: pages.classList.contains('is-dark')?'dark':'light' };
    localStorage.setItem(key, JSON.stringify(data));
    saveBtn.textContent='Guardado ✓'; setTimeout(()=> saveBtn.textContent='Guardar', 1000);
  }
  saveBtn.addEventListener('click', save);

  let autosave;
  text.addEventListener('input', ()=>{
    pages.classList.add('exfx-writing');
    clearTimeout(autosave);
    autosave=setTimeout(()=>{ save(); pages.classList.remove('exfx-writing'); }, 1000);
  });

  clearBtn.addEventListener('click', ()=>{
    if(!confirm('¿Borrar la nota y el dibujo?')) return;
    localStorage.removeItem(key);
    text.value=''; ctx.clearRect(0,0,board.width,board.height);
  });
})();
</script>

</body>
</html>










