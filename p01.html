<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pista con Reloj + Libreta (B/N)</title>

<style>
  :root{
    /* === Ajustes rápidos === */
    --bg-image: url("TU-IMAGEN-RELOJ.jpg"); /* ← PON AQUÍ TU FOTO */
    --clock-size: 420px;   /* diámetro del reloj superpuesto (ajusta) */
    --clock-top: 22vh;     /* posición vertical (ajusta) */
    --clock-left: 50%;     /* posición horizontal (ajusta) */

    /* Paleta B/N */
    --ink:#111;
    --muted:#666;
    --paper:#fff;
    --bg:#000; /* fondo general detrás de la imagen */
  }

  /* Reset suave */
  *,*::before,*::after{ box-sizing:border-box }
  html,body{ height:100% }
  body{ margin:0; background:#111; color:var(--ink); font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; line-height:1.6 }

  /* ======== HERO con imagen de fondo ======== */
  .exbw-hero{
    position:relative; min-height:70vh; overflow:hidden; background:#000;
  }
  .exbw-hero::before{
    content:""; position:absolute; inset:0;
    background: var(--bg) var(--bg-image) center/cover no-repeat;
    filter: grayscale(100%) contrast(110%) brightness(.75);
  }
  /* Capa oscura para contraste del texto */
  .exbw-hero::after{
    content:""; position:absolute; inset:0; background: linear-gradient(180deg, rgba(0,0,0,.45), rgba(0,0,0,.55));
  }

  /* Texto superpuesto (tu frase) con caja legible */
  .exbw-hero-content{
    position:absolute; inset:0; display:grid; place-items:center; padding:24px;
  }
  .exbw-quote-wrap{
    max-width: 1100px; margin:auto;
    background: rgba(0,0,0,.45);
    -webkit-backdrop-filter: blur(3px);
    backdrop-filter: blur(3px);
    border: 1px solid rgba(255,255,255,.25);
    border-radius: 14px;
    padding: clamp(16px, 2.5vw, 28px);
    box-shadow: 0 24px 60px rgba(0,0,0,.5);
    text-align:center;
  }
  .exbw-quote{
    margin:0 0 12px 0;
    color:#fff;
    font-weight:800;
    letter-spacing:.2px;
    font-size: clamp(1.2rem, 1rem + 2.2vw, 3rem);
    text-shadow: 0 2px 10px rgba(0,0,0,.8);
  }
  .exbw-meta{
    margin:0 0 18px 0;
    color: #efefef;
    font-style: italic;
    font-size: clamp(.95rem, .9rem + .5vw, 1.2rem);
    text-shadow: 0 1px 6px rgba(0,0,0,.75);
    opacity:.95;
  }

  /* Botones bajo la frase */
  .exbw-actions{
    display:flex; gap:12px; justify-content:center; flex-wrap:wrap;
  }
  /* Botón blanco para abrir libreta */
  .exbw-btn{
    background:#fff; color:#000; border:1px solid #fff;
    border-radius:12px; padding:10px 16px; font-weight:800; cursor:pointer;
    box-shadow: 0 8px 26px rgba(0,0,0,.5);
    transition: transform .08s ease, opacity .15s ease;
  }
  .exbw-btn:active{ transform: translateY(1px) scale(.99) }

  /* (Tu botón VOLVER: no lo toco. Si está aquí, lo respetará) */
  .exbw-slot-volver{ margin-top:10px }

  /* ======== Reloj SVG (agujas animadas) ======== */
  .exbw-clock{
    position:absolute;
    width: var(--clock-size); height: var(--clock-size);
    left: calc(var(--clock-left) - var(--clock-size)/2);
    top: var(--clock-top);
    pointer-events:none;
    opacity:.9;
    mix-blend-mode: normal;
  }
  .exbw-clock .face{ fill:none; stroke:#fff; stroke-width:2; opacity:.18 }
  .exbw-clock .hand{ stroke:#fff; stroke-linecap:round; transform-origin:210px 210px }
  .exbw-clock .hour{ stroke-width:6 }
  .exbw-clock .min{ stroke-width:4 }
  .exbw-clock .sec{ stroke:#ddd; stroke-width:2; opacity:.95 }
  .exbw-clock .center{ fill:#fff }

  /* ======== MODAL: Libreta (B/N) ======== */
  .exbw-modal[aria-hidden="true"]{ display:none }
  .exbw-modal[aria-hidden="false"]{ display:block }

  .exbw-backdrop{
    position:fixed; inset:0; background: rgba(0,0,0,.65); backdrop-filter: blur(2px);
  }
  .exbw-book-wrap{
    position:fixed; inset:0; display:grid; place-items:center; pointer-events:none; padding:16px;
  }
  .exbw-cover,.exbw-pages{ pointer-events:auto; height:min(76vh,760px) }
  .exbw-cover{
    width:min(44vw,520px);
    background: repeating-linear-gradient( 135deg, #222, #222 14px, #111 14px, #111 28px );
    border-radius:18px 0 0 18px; box-shadow:0 18px 60px rgba(0,0,0,.55);
    transform-origin:left center; animation: exbw-open 900ms cubic-bezier(.2,.8,.2,1) forwards;
  }
  .exbw-pages{
    --page-bg:#fff; --page-ink:#111; --page-line:#000;
    width:min(52vw,720px);
    background: var(--page-bg);
    color: var(--page-ink);
    border:2px solid #000; border-left:0; border-radius:0 18px 18px 0;
    box-shadow:0 18px 60px rgba(0,0,0,.65); padding:14px 16px 16px; position:relative; overflow:hidden;
  }
  /* Tema negro para la libreta */
  .exbw-pages.is-dark{
    --page-bg:#111; --page-ink:#f2f2f2; --page-line:#fff;
  }
  .exbw-pages::before{
    content:""; position:absolute; inset:0; pointer-events:none;
    background: repeating-linear-gradient(var(--page-bg), var(--page-bg) 26px, rgba(0,0,0,.06) 27px);
    opacity:.4;
  }
  .exbw-head{ position:relative; display:flex; justify-content:space-between; align-items:center; z-index:2 }
  .exbw-title{ margin:0; font-size:1.05rem }
  .exbw-close{ background:transparent; color:var(--page-ink); border:0; font-size:1.8rem; line-height:1; cursor:pointer; padding:0 6px }
  .exbw-tools{ display:flex; justify-content:space-between; align-items:center; gap:.75rem; z-index:2; position:relative; margin-top:8px }
  .exbw-left{ display:flex; align-items:center; gap:.5rem }
  .exbw-toggle{
    background:transparent; color:var(--page-ink); border:1px solid var(--page-ink);
    padding:6px 10px; border-radius:8px; font-weight:800; cursor:pointer;
  }
  .exbw-actions{ display:flex; gap:.5rem }
  .exbw-action{
    background:#000; color:#fff; border:1px solid #000; border-radius:10px; padding:8px 12px; font-weight:800; cursor:pointer;
  }
  .exbw-pages.is-dark .exbw-action{ background:#fff; color:#000; border-color:#fff }

  /* Lápiz (mono) */
  .exbw-pencil{ position:relative; width:150px; height:24px; display:grid; grid-template-columns:1fr auto auto; align-items:center;
    transform:translateX(0); animation: exbw-pencil-enter .8s ease .3s both, exbw-pencil-bob 2.4s ease-in-out 1.2s infinite; }
  .exbw-pencil .body{ height:10px; border-radius:6px; background: linear-gradient(90deg,#666,#999 70%,#666) }
  .exbw-pencil .tip{ width:0;height:0;border-left:12px solid #666;border-top:6px solid transparent;border-bottom:6px solid transparent }
  .exbw-pencil .eraser{ width:18px;height:14px;border-radius:4px;background:#ddd;border:2px solid #aaa }

  .exbw-label{ display:block; margin:10px 0 6px; z-index:2; position:relative; color:var(--page-ink) }
  .exbw-textarea{
    width:100%; min-height:220px; resize:vertical; z-index:2; position:relative;
    padding:12px 12px 12px 16px; border-radius:12px; border:1px dashed var(--page-line);
    background: color-mix(in srgb, var(--page-bg) 92%, white 8%);
    color:var(--page-ink); box-shadow: inset 0 2px 8px rgba(0,0,0,.08);
    outline:none;
  }
  /* Pizarra (canvas) para escribir con “lápiz” */
  .exbw-board{ width:100%; height:260px; background:var(--page-bg); border:1px solid var(--page-line); border-radius:12px; display:block; box-shadow: inset 0 2px 8px rgba(0,0,0,.08); cursor: crosshair }

  .exbw-footer{ margin-top:8px; z-index:2; position:relative; color:var(--page-ink) }

  @keyframes exbw-open{
    0%{ transform:perspective(1200px) rotateY(0deg) translateZ(0) }
    60%{ transform:perspective(1200px) rotateY(-115deg) translateZ(2px) }
    100%{ transform:perspective(1200px) rotateY(-180deg) translateZ(4px) }
  }
  @keyframes exbw-pencil-enter{ from{opacity:0;transform:translateX(-16px)} to{opacity:1;transform:translateX(0)} }
  @keyframes exbw-pencil-bob{ 0%,100%{transform:translateX(0) translateY(0)} 50%{transform:translateX(0) translateY(-2px)} }
  .exbw-writing .exbw-pencil{ animation: exbw-write .8s ease-in-out infinite }
  @keyframes exbw-write{ 0%,100%{transform:translateX(0)} 50%{transform:translateX(6px)} }

  /* Responsive */
  @media (max-width: 960px){
    :root{ --clock-size: 300px; --clock-top: 26vh; }
    .exbw-cover{ display:none }
    .exbw-pages{ width:min(94vw,720px); border-radius:14px; border-left:2px solid #000 }
    .exbw-pages.is-dark{ border-left-color:#fff }
  }
</style>
</head>
<body>

  <!-- ======== HERO con tu imagen + frase + botones ======== -->
  <section class="exbw-hero">

    <!-- Reloj superpuesto (ajusta posición/size con variables) -->
    <svg class="exbw-clock" viewBox="0 0 420 420" aria-hidden="true">
      <circle class="face" cx="210" cy="210" r="204"></circle>
      <!-- marcas -->
      <g stroke="#fff" stroke-width="3" opacity=".55">
        <line x1="210" y1="18"  x2="210" y2="36"/>
        <line x1="346" y1="74"  x2="332" y2="88"/>
        <line x1="402" y1="210" x2="384" y2="210"/>
        <line x1="346" y1="346" x2="332" y2="332"/>
        <line x1="210" y1="402" x2="210" y2="384"/>
        <line x1="74"  y1="346" x2="88"  y2="332"/>
        <line x1="18"  y1="210" x2="36"  y2="210"/>
        <line x1="74"  y1="74"  x2="88"  y2="88"/>
      </g>
      <!-- agujas -->
      <line id="exbw-hour" class="hand hour" x1="210" y1="210" x2="210" y2="120"/>
      <line id="exbw-min"  class="hand min"  x1="210" y1="210" x2="210" y2="86"/>
      <line id="exbw-sec"  class="hand sec"  x1="210" y1="216" x2="210" y2="70"/>
      <circle class="center" cx="210" cy="210" r="6"/>
    </svg>

    <div class="exbw-hero-content">
      <div class="exbw-quote-wrap">
        <!-- Pega aquí tu frase EXACTA -->
        <p class="exbw-quote">“Cada mañana a las 8:30, el reloj marcaba lo mismo. Las agujas brillaban, como si guardaran el secreto de quien las tocaba.”</p>
        <p class="exbw-meta">Archivo #P-01 — Bitácora de estación. Frecuencia: 8:30 h.</p>

        <div class="exbw-actions">
          <!-- Botón blanco para abrir la libreta -->
          <button class="exbw-btn" type="button" aria-haspopup="dialog" aria-controls="exbw-modal">Abrir libreta</button>

          <!-- AQUI va tu botón Volver (no lo tocamos) -->
          <span class="exbw-slot-volver">
            <!-- deja tu <button>Volver</button> o enlace aquí si quieres colocarlo junto -->
          </span>
        </div>
      </div>
    </div>
  </section>

  <!-- ======== MODAL: Libreta en B/N con lápiz para escribir ======== -->
  <section class="exbw-notes" data-note-key="pista_reloj_bn">
    <div class="exbw-modal" id="exbw-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="exbw-title">
      <div class="exbw-backdrop" data-exbw-close></div>

      <div class="exbw-book-wrap">
        <div class="exbw-cover" aria-hidden="true"></div>

        <div class="exbw-pages" id="exbw-pages">
          <header class="exbw-head">
            <h3 class="exbw-title" id="exbw-title">Mi libreta</h3>
            <button class="exbw-close" type="button" title="Cerrar" aria-label="Cerrar" data-exbw-close>&times;</button>
          </header>

          <div class="exbw-tools">
            <div class="exbw-left">
              <!-- Lápiz decorativo (se anima cuando escribes) -->
              <div class="exbw-pencil" aria-hidden="true">
                <div class="body"></div><div class="tip"></div><div class="eraser"></div>
              </div>
              <!-- Cambiar tema blanco/negro -->
              <button class="exbw-toggle" id="exbw-theme">Tema: Blanco</button>
            </div>

            <div class="exbw-actions">
              <button class="exbw-action" id="exbw-save" type="button">Guardar</button>
              <button class="exbw-action" id="exbw-clear" type="button">Borrar</button>
            </div>
          </div>

          <!-- Texto con teclado -->
          <label class="exbw-label" for="exbw-text">Escribe tu nota (teclado):</label>
          <textarea id="exbw-text" class="exbw-textarea" placeholder="Escribe aquí..."></textarea>

          <!-- Pizarra para escribir con el lápiz (canvas) -->
          <label class="exbw-label" for="exbw-board">O dibuja tu nota (lápiz):</label>
          <canvas id="exbw-board" class="exbw-board"></canvas>

          <footer class="exbw-footer">
            <small>Se guarda en este navegador (texto + dibujo). Todo en blanco y negro.</small>
          </footer>
        </div>
      </div>
    </div>
  </section>

<script>
/* ======== Agujas del reloj en tiempo real ======== */
(function(){
  const h=document.getElementById('exbw-hour');
  const m=document.getElementById('exbw-min');
  const s=document.getElementById('exbw-sec');
  function tick(){
    const now=new Date();
    const sec=now.getSeconds();
    const min=now.getMinutes()+sec/60;
    const hr=(now.getHours()%12)+min/60;
    h.style.transform=`rotate(${(hr/12)*360}deg)`;
    m.style.transform=`rotate(${(min/60)*360}deg)`;
    s.style.transform=`rotate(${(sec/60)*360}deg)`;
  }
  tick(); setInterval(tick,1000);
})();

/* ======== Libreta: texto + dibujo + tema B/N + guardar/borrar ======== */
(function(){
  const wrapper=document.querySelector('.exbw-notes');
  const storageKey='exbw_notes_'+(wrapper?.dataset?.noteKey||'nota');

  const modal=document.getElementById('exbw-modal');
  const pages=document.getElementById('exbw-pages');
  const openBtn=document.querySelector('.exbw-btn');
  const backdrop=modal.querySelector('[data-exbw-close]');
  const closeBtn=modal.querySelector('.exbw-close');

  const textArea=document.getElementById('exbw-text');
  const board=document.getElementById('exbw-board');
  const ctx=board.getContext('2d');

  const saveBtn=document.getElementById('exbw-save');
  const clearBtn=document.getElementById('exbw-clear');
  const themeBtn=document.getElementById('exbw-theme');

  /* Abrir / cerrar */
  function open(){
    modal.setAttribute('aria-hidden','false');
    // cargar datos guardados
    try{
      const data=JSON.parse(localStorage.getItem(storageKey)||'{}');
      if(data.text) textArea.value=data.text;
      if(data.img){
        const img=new Image();
        img.onload=()=>{ resizeBoard(); ctx.clearRect(0,0,board.width,board.height); ctx.drawImage(img,0,0,board.width,board.height); };
        img.src=data.img;
      }else{
        resizeBoard();
      }
      if(data.theme==='dark'){ pages.classList.add('is-dark'); themeBtn.textContent='Tema: Negro'; }
    }catch(e){ resizeBoard(); }
    setTimeout(()=>textArea.focus(),50);
    document.addEventListener('keydown', escClose);
  }
  function close(){
    modal.setAttribute('aria-hidden','true');
    document.removeEventListener('keydown', escClose);
  }
  function escClose(e){ if(e.key==='Escape') close(); }

  openBtn.addEventListener('click', open);
  [backdrop,closeBtn].forEach(el=> el.addEventListener('click', close));

  /* Tema blanco/negro */
  themeBtn.addEventListener('click', ()=>{
    pages.classList.toggle('is-dark');
    themeBtn.textContent = pages.classList.contains('is-dark') ? 'Tema: Negro' : 'Tema: Blanco';
  });

  /* Tamaño canvas responsivo */
  function resizeBoard(){
    const rect=board.getBoundingClientRect();
    const tmp=document.createElement('canvas');
    tmp.width=rect.width; tmp.height=rect.height;
    tmp.getContext('2d').drawImage(board,0,0,rect.width,rect.height);
    board.width=rect.width; board.height=rect.height;
    ctx.drawImage(tmp,0,0);
    ctx.lineCap='round'; ctx.lineJoin='round'; ctx.strokeStyle= pages.classList.contains('is-dark') ? '#fff' : '#000'; ctx.lineWidth=2.2;
  }
  new ResizeObserver(resizeBoard).observe(board);

  /* Dibujo con lápiz */
  let drawing=false, lastX=0,lastY=0;
  function start(x,y){ drawing=true; [lastX,lastY]=[x,y]; pages.classList.add('exbw-writing'); }
  function move(x,y){
    if(!drawing) return;
    ctx.strokeStyle= pages.classList.contains('is-dark') ? '#fff' : '#000';
    ctx.beginPath(); ctx.moveTo(lastX,lastY); ctx.lineTo(x,y); ctx.stroke();
    [lastX,lastY]=[x,y];
  }
  function end(){ drawing=false; setTimeout(()=>pages.classList.remove('exbw-writing'),400); }

  function pos(ev){
    const r=board.getBoundingClientRect();
    if(ev.touches && ev.touches[0]) return {x:ev.touches[0].clientX-r.left, y:ev.touches[0].clientY-r.top};
    return {x:ev.clientX-r.left, y:ev.clientY-r.top};
  }

  board.addEventListener('mousedown', e=>{const p=pos(e); start(p.x,p.y);});
  board.addEventListener('mousemove', e=>{const p=pos(e); move(p.x,p.y);});
  window.addEventListener('mouseup', end);

  board.addEventListener('touchstart', e=>{const p=pos(e); start(p.x,p.y); e.preventDefault();},{passive:false});
  board.addEventListener('touchmove',  e=>{const p=pos(e); move(p.x,p.y);  e.preventDefault();},{passive:false});
  window.addEventListener('touchend', end, {passive:true});

  /* Guardar (texto + dibujo + tema) */
  function save(){
    const data={ text: textArea.value||'', img: board.toDataURL('image/png'), theme: pages.classList.contains('is-dark')?'dark':'light' };
    localStorage.setItem(storageKey, JSON.stringify(data));
    saveBtn.textContent='Guardado ✓'; setTimeout(()=> saveBtn.textContent='Guardar', 1000);
  }
  saveBtn.addEventListener('click', save);

  /* Autoguardado suave al escribir */
  let autosave;
  textArea.addEventListener('input', ()=>{
    pages.classList.add('exbw-writing');
    clearTimeout(autosave);
    autosave=setTimeout(()=>{ save(); pages.classList.remove('exbw-writing'); }, 1000);
  });

  /* Borrar */
  clearBtn.addEventListener('click', ()=>{
    if(!confirm('¿Borrar la nota y el dibujo?')) return;
    localStorage.removeItem(storageKey);
    textArea.value=''; ctx.clearRect(0,0,board.width,board.height);
  });
})();
</script>

</body>
</html>










